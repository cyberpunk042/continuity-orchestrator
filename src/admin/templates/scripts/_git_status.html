        // ========================================
        // GIT STATUS (dashboard card)
        // ========================================
        async function loadGitStatus() {
            const el = document.getElementById('git-status-content');
            if (!el) return;
            try {
                const resp = await fetch('/api/git/status');
                const g = await resp.json();
                if (!g.available) {
                    el.innerHTML = `<span style="color: var(--text-dim);">‚ö†Ô∏è ${g.error || 'Git not available'}</span>`;
                    return;
                }

                const syncIcon = g.clean ? '‚úÖ' : g.total_changes > 0 ? 'üü°' : 'üü¢';
                const abHtml = (g.ahead || g.behind)
                    ? `<span style="color: var(--warning);">${g.ahead ? `‚Üë${g.ahead}` : ''} ${g.behind ? `‚Üì${g.behind}` : ''}</span>`
                    : '<span style="color: var(--accent);">In sync</span>';

                el.innerHTML = `
                    <div class="status-row">
                        <span class="status-label">Branch</span>
                        <span class="status-value" translate="no" style="font-family: monospace;">${g.branch}</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Last commit</span>
                        <span class="status-value" translate="no" style="font-size: 0.82rem;">${g.last_commit} <span style="color: var(--text-dim);">(${g.last_commit_time})</span></span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Changes</span>
                        <span class="status-value">${syncIcon} ${g.total_changes} pending ${g.staged ? `(${g.staged} staged)` : ''}</span>
                    </div>
                    <div class="status-row">
                        <span class="status-label">Remote</span>
                        <span class="status-value">${abHtml}</span>
                    </div>
                    <div id="git-auto-fetch-notice" style="display: none;"></div>
                    <div class="actions" style="margin-top: 0.75rem;">
                        <button class="btn" onclick="loadGitStatus()">üîÑ Refresh</button>
                        <button class="btn primary" onclick="dashboardGitSync()" id="dash-sync-btn">üì§ Sync Now</button>
                    </div>
                    <div id="dash-git-status" style="font-size: 0.85rem; margin-top: 0.5rem;"></div>
                `;

                // After rendering, trigger auto-fetch display if we have cached data
                if (window._lastFetchResult) showFetchNotice(window._lastFetchResult);
            } catch (e) {
                el.innerHTML = `<span style="color: var(--danger);">‚ùå ${e.message}</span>`;
            }
        }

        async function dashboardGitSync() {
            const statusDiv = document.getElementById('dash-git-status');
            const btn = document.getElementById('dash-sync-btn');
            if (btn) btn.disabled = true;
            if (statusDiv) statusDiv.innerHTML = '<span style="color: var(--info);">üîÑ Syncing...</span>';
            try {
                const resp = await fetch('/api/git/sync', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: 'chore: sync from admin panel' }),
                });
                const data = await resp.json();
                if (data.success) {
                    let msg = `‚úÖ ${data.message}`;
                    if (data.mirror_sync_triggered) {
                        msg += ' ¬∑ ü™û Mirror sync in progress‚Ä¶';
                        setTimeout(loadMirrorStatus, 2000);
                        setTimeout(loadMirrorStatus, 15000);
                    }
                    if (statusDiv) statusDiv.innerHTML = `<span style="color: var(--accent);">${msg}</span>`;
                } else {
                    if (statusDiv) statusDiv.innerHTML = `<span style="color: var(--danger);">‚ö†Ô∏è ${data.error || 'Failed'}</span>`;
                }
                // Immediately refresh git status + fetch notice
                loadGitStatus();
                autoFetch();
            } catch (e) {
                if (statusDiv) statusDiv.innerHTML = `<span style="color: var(--danger);">‚ùå ${e.message}</span>`;
            }
            if (btn) btn.disabled = false;
        }

